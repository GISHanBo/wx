webpackJsonp([1],{"9PKR":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("xd7I"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=n("C7Lr")({name:"App"},a,!1,function(t){n("YykL")},null,null).exports,s=n("Gir3"),r=n.n(s),c=(n("hsAa"),n("usm0")),l=n("ZcWJ"),d=n.n(l),h={render:function(){var t=this.$createElement;return(this._self._c||t)("el-tag",{attrs:{type:"danger"}},[this._v(this._s(this.text))])},staticRenderFns:[]};var u={components:{coordinateText:n("C7Lr")({name:"CoordinateText",data:function(){return{}},props:["lng","lat"],methods:{},computed:{text:function(){return"经度："+this.lng.toFixed(2)+" 纬度："+this.lat.toFixed(2)}}},h,!1,function(t){n("VU0R")},"data-v-c67fd538",null).exports},name:"TestMap",data:function(){return{map:null,hasLoaded:!1,showInfo:!1,id:null,qhmc:null,zwmc:null,name:"",mj:0}},mounted:function(){document.getElementById("canvas").getContext("webgl")||(console.log("当前浏览器版本不支持webgl，请升级或切换浏览器"),alert("不支持webgl"),window.android.report()),d.a.supported()||(window.android.report(),alert("Your browser does not support Mapbox GL")),d.a.accessToken="pk.eyJ1IjoiaGFtYnVnZXJkZXZlbG9wIiwiYSI6ImNqNXJtZjF4ZzB3em4yd21pZmVqbHlleDAifQ.I9eqVjtotz7jaU7XcJm9pQ",this.map=new d.a.Map({container:"map",style:"http://gykj123.cn:9021/api/v1/styles/gykj/S1wsBE2lH",center:[114.08316983,33.615693],zoom:14});var t=this;this.map.on("style.load",function(){t.hasLoaded||(t.hasLoaded=!0,t.map.addLayer({id:"种植结构高亮",source:"dt_zzjg",type:"line",minzoom:1,maxzoom:23,layout:{visibility:"visible"},paint:{"line-color":"#00ffff","line-width":5},"source-layer":"dt_zzjg",metadata:{"mapbox:group":"04687df45bbae"},visibility:"none",filter:["in","objectid",""]})),t.addControl(),t.map.on("mousemove",function(e){t.lng=e.lngLat.lng,t.lat=e.lngLat.lat}),t.map.on("click","种植结构",function(e){var n=[[e.point.x,e.point.y],[e.point.x,e.point.y]],i=t.map.queryRenderedFeatures(n,{layers:["种植结构"]});if(i.length>0){for(var a=i.reduce(function(t,e){return t.push(e.properties.objectid),t},["in","objectid"]),o=i[0].geometry.coordinates[0],s=o[0][0],r=o[0][0],c=o[0][1],l=o[0][1],h=1;h<o.length;h++)s>o[h][0]?s=o[h][0]:r<o[h][0]&&(r=o[h][0]),c>o[h][1]?c=o[h][1]:r<o[h][1]&&(l=o[h][1]);t.map.fitBounds(new d.a.LngLatBounds([s,c],[r,l]),{padding:60}),t.showInfo=!0,t.id=i[0].properties.objectid,t.qhmc=i[0].properties.qhmc,t.zwmc=i[0].properties.zwmc,t.map.setFilter("种植结构高亮",a)}else t.showInfo=!1})}),console.log(this.getQueryString("name")),console.log(this.getQueryString("mj")),this.name=this.getQueryString("name"),this.mj=this.getQueryString("mj")},methods:{addControl:function(){var t=new d.a.ScaleControl({maxWidth:80,unit:"imperial"});this.map.addControl(t)},click:function(){this.showInfo=!1,this.map.setFilter("种植结构高亮",["in","objectid",""])},returnClick:function(){wx.miniProgram.navigateBack({delta:1})},getQueryString:function(t){var e=decodeURI(window.location.href);if(-1!=e.indexOf("?")){for(var n=e.split("?")[1].split("&"),i=0;i<n.length;i++){var a=n[i].split("=");if(a[0]==t)return a[1]}return!1}}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"parent"},[n("div",{staticClass:"top"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.name,expression:"name"}],staticStyle:{float:"left","margin-left":"10px"}},[t._v("姓名："+t._s(t.name))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.mj,expression:"mj"}],staticStyle:{float:"left","margin-left":"10px"}},[t._v("地块面积(亩)："+t._s(t.mj))]),t._v(" "),n("div",{staticStyle:{float:"right","margin-right":"10px"},on:{click:t.returnClick}},[t._v("施肥建议>")])]),t._v(" "),n("div",{attrs:{id:"map"}}),t._v(" "),n("div",{staticClass:"card"},[n("el-card",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],staticClass:"box-card info"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("种植结构信息")]),t._v(" "),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{icon:"el-icon-close",type:"text"},on:{click:t.click}})],1),t._v(" "),n("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"canvas"}}),t._v(" "),n("el-row",{attrs:{gutter:22}},[n("el-col",{attrs:{span:4}},[t._v("id")]),t._v(" "),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"grid-content bg-purple"},[t._v(t._s(t.id))])])],1),t._v(" "),n("el-row",{attrs:{gutter:22}},[n("el-col",{attrs:{span:4}},[t._v("qh")]),t._v(" "),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"grid-content bg-purple"},[t._v(t._s(t.qhmc))])])],1),t._v(" "),n("el-row",{attrs:{gutter:22}},[n("el-col",{attrs:{span:4}},[t._v("zw")]),t._v(" "),n("el-col",{attrs:{span:18}},[n("div",{staticClass:"grid-content bg-purple"},[t._v(t._s(t.zwmc))])])],1)],1)],1)])},staticRenderFns:[]};var g=n("C7Lr")(u,p,!1,function(t){n("9PKR")},null,null).exports;i.default.use(c.a);var f=new c.a({routes:[{path:"/",name:"TestMap",component:g}]}),m=n("8zml"),v=n.n(m),w=n("IHPB"),y=n.n(w),_=n("3qyi"),b=n.n(_),x=n("yRAu"),z=n.n(x),j=n("3mB0"),C=["legendselectchanged","legendselected","legendunselected","legendscroll","datazoom","datarangeselected","timelinechanged","timelineplaychanged","restore","dataviewchanged","magictypechanged","geoselectchanged","geoselected","geounselected","pieselectchanged","pieselected","pieunselected","mapselectchanged","mapselected","mapunselected","axisareaselected","focusnodeadjacency","unfocusnodeadjacency","brush","brushselected","rendered","finished","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],L={props:{options:Object,theme:[String,Object],initOptions:Object,group:String,autoresize:Boolean,watchShallow:Boolean,manualUpdate:Boolean},data:function(){return{lastArea:0}},watch:{group:function(t){this.chart.group=t}},methods:{mergeOptions:function(t,e,n){this.manualUpdate&&(this.manualOptions=t),this.chart?this.delegateMethod("setOption",t,e,n):this.init()},appendData:function(t){this.delegateMethod("appendData",t)},resize:function(t){this.delegateMethod("resize",t)},dispatchAction:function(t){this.delegateMethod("dispatchAction",t)},convertToPixel:function(t,e){return this.delegateMethod("convertToPixel",t,e)},convertFromPixel:function(t,e){return this.delegateMethod("convertFromPixel",t,e)},containPixel:function(t,e){return this.delegateMethod("containPixel",t,e)},showLoading:function(t,e){this.delegateMethod("showLoading",t,e)},hideLoading:function(){this.delegateMethod("hideLoading")},getDataURL:function(t){return this.delegateMethod("getDataURL",t)},getConnectedDataURL:function(t){return this.delegateMethod("getConnectedDataURL",t)},clear:function(){this.delegateMethod("clear")},dispose:function(){this.delegateMethod("dispose")},delegateMethod:function(t){var e;this.chart||this.init();for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return(e=this.chart)[t].apply(e,y()(i))},delegateGet:function(t,e){return this.chart||this.init(),this.chart[e]()},getArea:function(){return this.$el.offsetWidth*this.$el.offsetHeight},init:function(){var t=this;if(!this.chart){var e=b.a.init(this.$el,this.theme,this.initOptions);this.group&&(e.group=this.group),e.setOption(this.manualOptions||this.options||{},!0),C.forEach(function(n){e.on(n,function(e){t.$emit(n,e)})}),this.autoresize&&(this.lastArea=this.getArea(),this.__resizeHandler=z()(function(){0===t.lastArea?(t.mergeOptions({},!0),t.resize(),t.mergeOptions(t.options||t.manualOptions||{},!0)):t.resize(),t.lastArea=t.getArea()},100,{leading:!0}),Object(j.a)(this.$el,this.__resizeHandler)),v()(this,{width:{configurable:!0,get:function(){return t.delegateGet("width","getWidth")}},height:{configurable:!0,get:function(){return t.delegateGet("height","getHeight")}},isDisposed:{configurable:!0,get:function(){return!!t.delegateGet("isDisposed","isDisposed")}},computedOptions:{configurable:!0,get:function(){return t.delegateGet("computedOptions","getOption")}}}),this.chart=e}},destroy:function(){this.autoresize&&Object(j.b)(this.$el,this.__resizeHandler),this.dispose(),this.chart=null},refresh:function(){this.chart&&(this.destroy(),this.init())}},created:function(){var t=this;this.manualUpdate||this.$watch("options",function(e,n){!t.chart&&e?t.init():t.chart.setOption(e,e!==n)},{deep:!this.watchShallow});["theme","initOptions","autoresize","manualUpdate","watchShallow"].forEach(function(e){t.$watch(e,function(){t.refresh()},{deep:!0})})},mounted:function(){this.options&&this.init()},activated:function(){this.autoresize&&this.chart&&this.chart.resize()},beforeDestroy:function(){this.chart&&this.destroy()},connect:function(t){"string"!=typeof t&&(t=t.map(function(t){return t.chart})),b.a.connect(t)},disconnect:function(t){b.a.disConnect(t)},registerMap:function(t,e,n){b.a.registerMap(t,e,n)},registerTheme:function(t,e){b.a.registerTheme(t,e)},graphic:b.a.graphic},O={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"echarts"})},staticRenderFns:[]};var M=n("C7Lr")(L,O,!1,function(t){n("VpyK")},null,null).exports;n("buEa"),n("2cCK"),n("WVNF");i.default.config.productionTip=!1,i.default.use(r.a),i.default.component("v-chart",M),i.default.prototype.echartsResize=function(t){setInterval(function(){window.onresize=function(){t.resize()}},100)},new i.default({el:"#app",router:f,components:{App:o},template:"<App/>"})},VU0R:function(t,e){},VpyK:function(t,e){},YykL:function(t,e){},hsAa:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.60140858b928172b02f7.js.map